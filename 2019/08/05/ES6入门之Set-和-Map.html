<!DOCTYPE html><html lang="zh" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>ES6入门之Set 和 Map | 卖坚果的怪叔叔</title><meta name="keywords" content="Set,Map"><meta name="author" content="Lieme"><meta name="copyright" content="Lieme"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="ES6入门之Set 和 Map"><meta name="application-name" content="ES6入门之Set 和 Map"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="ES6入门之Set 和 Map"><meta property="og:url" content="https://toc.lieme.cn/2019/08/05/ES6%E5%85%A5%E9%97%A8%E4%B9%8BSet-%E5%92%8C-Map.html"><meta property="og:site_name" content="卖坚果的怪叔叔"><meta property="og:description" content="1. Set1.1 基本用法 Set 类似于数组，但是成员的 值都是唯一的，没用重复的值。Set本身是一个构造函数，用来生成Set数据结构。  const s &amp;#x3D; new Set();  [2,3,4,5,6,4,2,2,7].forEach(x &amp;#x3D;&amp;gt; s.add(x))  for (let"><meta property="og:locale" content="zh"><meta property="og:image" content="https://blogimg.lieme.cn/2023/07/2023072703121951.jpeg"><meta property="article:author" content="Lieme"><meta property="article:tag" content="卖坚果的怪叔叔 前端 vue python 微信"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://blogimg.lieme.cn/2023/07/2023072703121951.jpeg"><meta name="description" content="1. Set1.1 基本用法 Set 类似于数组，但是成员的 值都是唯一的，没用重复的值。Set本身是一个构造函数，用来生成Set数据结构。  const s &amp;#x3D; new Set();  [2,3,4,5,6,4,2,2,7].forEach(x &amp;#x3D;&amp;gt; s.add(x))  for (let"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="https://toc.lieme.cn/2019/08/05/ES6%E5%85%A5%E9%97%A8%E4%B9%8BSet-%E5%92%8C-Map"><link rel="preconnect" href="//cdn.cbd.int"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: {"enable":true,"img":"https://upload-bbs.miyoushe.com/upload/2023/09/03/125766904/ee23df8517f3c3e3efc4145658269c06_5714860933110284659.png"},
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  root: '/',
  preloader: {"source":1},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: undefined,
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: Lieme","link":"链接: ","source":"来源: 卖坚果的怪叔叔","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: '卖坚果的怪叔叔',
  title: 'ES6入门之Set 和 Map',
  postAI: '',
  pageFillDescription: '1. Set, 1.1 基本用法, 1.2 Set 实例的属性和方法, 1.3 遍历操作, 1.3.1 keys()、values、entries(), 1.3.2 forEach(), 1.3.3 遍历的应用, 2. WeakSet, 2.1 语法, 2.2 WeakSet的方法, 3. Map, 3.1 Map的属性和操作方法, 1. size 属性, 2. Map.prototype.set(key value), 3. Map.prototype.get(key), 4. Map.prototype.has(key), 5. Map.prototype.delete(key), 6. Map.prototype.clear(), 3.2 遍历方法, 3.3 与其他数据结构的互相转换, 1. Map转为数组, 2. 数组转为Map, 3. Map 转为对象, 4. 对象转为 Map, 5. Map 转为 JSON, 6. JSON 转为 Map, 4. WeakMap, 4.1 WeakMap 的语法, 4.2 WeakMap的用途基本用法类似于数组但是成员的值都是唯一的没用重复的值本身是一个构造函数用来生成数据结构不会添加重复的值函数可以接受一个数组或具有接口的其他数据结构作为参数用来初始化如下实例一实例二上面代码还展示了数组去重的方法或者字符串去重向加入值的时候不会发生类型转换所有和两个不同的值在内部判断两个值是否不同使用的算法叫做它和类似区别在于向加入值的时候认为等于自身而则认为不等于自身如上只能向中添加一个则说明了刚刚的证明在中两个对象总是不相等的实例的属性和方法结构的实例有以下属性构造函数默认是函数返回实例的成员总数实例的方法分为两大类操作方法和遍历方法添加某个值返回结构本身删除某个值返回一个布尔值表示是否删除成功返回一个布尔值表示该值是否为的成员清除所有成员没用返回值注意被加入了两次和如何判断一个键的区别对象方法可以将结构转为数组如下数组去重的另外一种方法遍历操作结构的实例有四个遍历方法用于遍历成员返回键名的遍历器返回键值的遍历器返回键值对的遍历器使用回调函数遍历每个成员注意遍历顺序就是插入顺序这个特性在特定情况非常有用比如使用保存一个回调函数列表调用时就能保证按照添加顺序调用上面三个都是返回遍历器对象由于结构没用键名只有键值或者说键名和键值是同一个值所以以上方法的行为完全一致注意结构的实例默认可遍历它的默认遍历器生成函数就是它的方法这样我们就可以省略直接用循环遍历结构的实例和数组一样也有方法用于对每个成员执行某种操作没用返回值可以用第二个参数表示绑定处理函数内部的对象遍历的应用扩展运算符内部使用循环样能用于结构用来去重操作实现并集交集差集并集交集差集如果想在遍历操作中同步改变原理的结构只能利用原有的结构映射一个新的结构然后赋值给原来的另一个就是通过方法方法一的值是方法二的值是结构与类似也不是重复的值的集合但是和有两个区别第一个它的成员只能为对象另一个它的对象都是弱印象即垃圾回收机制不考虑对该对象的引用通俗的讲就是如果该对象没用在其他对象中被引用那么该对象就会被回收不会考虑这个对象是否在中依赖于垃圾回收进制依赖引用计数如果一个值的引用次数不为那么就不会被回收但是有的时候结束使用该值后会忘记取消引用就会导致内存无法释放从而导致内存泄漏但是里面的而引用不会计入垃圾回收机制所以适合存放临时的对象一旦外部消失那么里面的引用就会自动消失基于以上的特点成员不适合被引用所以无法被遍历语法它也是一个构造函数可以通过来创建做为构造函数可以接受一个数组或类似数组的对象作为参数该数组的所有成员都会自动成为实例对象的成员注意只能是数组的成员成为的成员而不是数组本身这就意味着数组的成员只能是对象的方法向实例添加一个新成员清除实例的指定成员返回一个布尔值表示某个值是否存在实例中注意同样没有属性不能遍历其成员的对象本质上是键值对的集合但是传统上只能字符串当做键这给他带来了很大的限制的出现就是让各种类型的值都可以当作键提供的是值值的对应张三张三注意和都可以用来生成新的如果对同一个键多次赋值那么前面的将被后面的值覆盖另外只有对同一个对象的引用结构才将其视为同一个键另外同样的两个实例在中将被视为两个键总结综上所述的键实际上跟内存地址绑定的只要内存地址不一样就视为两个键这样就可以解决同名属性碰撞的问题如果我们扩展别人库的时候如果使用对象最为键名就不用担心自己的属性与原作者属性冲突如果的键是一个简单类型的数值则只要两个值严格相等将其视为一个键和是一个键和则是两个不同的键和也是两个不同的键另外在中视为同一个键的属性和操作方法属性属性返回结构的成员总数方法设置键名对应的键值为然后返回整个结构如果已经有值则键值会被更新否则就新生成该键键值是字符串键是数值键是方法返回的是当前的对象因此可以采用链式写法方法读取对应的键值如果找不到就返回返回一个布尔值用来表示某个键是否在当前对象中方法删除某个键返回如果删除失败则返回方法清除所有成员没有返回值遍历方法返回键名的遍历器返回键值的遍历器返回所有成员的遍历器遍历的所有成员注意的遍历顺序就是插入顺序结构转为数组结构比较快速的方法是使用扩展运算符另外可以通过可以实现遍历与其他数据结构的互相转换转为数组通过扩展运算符数组转为将数组传入构造函数就可以转为转为对象如果的键都是字符串它可以无损地转为对象如果有非字符串的键名那么这个键名会被转成字符串再作为对象的键名对象转为转为转为要区分两种情况一种情况是的键名都是字符串这时可以选择转为对象另外一种情况是的键名有非字符串这时可以选择转为数组转为转为正常情况下所有键名都是字符串但是有一种特殊情况整个就是一个数组且每个数组成员本身又是一个有两个成员的数组这时它可以一一对应地转为结构与结构类似也是用于生成键值对的集合和的区别只接受对象作为键名除外不接受其他类型的值作为键名的键名所指向的对象不计入垃圾回收机制如果我们想在某个对象上面存放以未数据但是会形成对于这个对象的引用如果我们不需要这两个对象就必须手动删除否则垃圾回收机制就不会释放占用的内存就是为了解决这个问题而诞生它的键名所引用的对象都是弱引用即垃圾回收机制不将该引用考虑在内因此只要所引用的对象的其他引用被清除垃圾回收机制就会释放该对象所占用的内存也就是说一旦不再需要里面的键名对象和所对应的键值对会自动消失不用手动删除注意弱引用的只是键名而不是键值键值依然是正常引用的语法与在的区别主要有两个一是没有遍历操作没有也没有属性因为没有办法列出所有键名某个键名是否存在完全不可预测跟垃圾回收机制是否运行相关这一刻可以取到键名下一个垃圾回收机制突然运行了这个键名就没有了为了防止不确定性就统一规定不能取到键名二是无法情况即不支持方法因此有四个方法方法都不存在的用途应用于节点作为键名的另一个用处是部署私有属性就是防止内存泄漏的风险欢迎关注公众号小夭同学',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-01-04 14:20:10',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.0.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://blogimg.lieme.cn/2023/07/2023072703121951.jpeg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><a id="site-name" href="/" accesskey="h"><div class="title">卖坚果的怪叔叔</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/travel/"><span> 旅行</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/photos/"><span> 定格时光</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/life/"><span> 生活</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/about/"><span> 关于</span></a></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://blogimg.lieme.cn/2022/05/2022051011515173.png" target="_blank"><img class="post-qr-code-img" alt="微信" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://blogimg.lieme.cn/2022/05/2022051011515173.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://blogimg.lieme.cn/2022/05/2022051011515173.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://blogimg.lieme.cn/2022/05/2022051011515173.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/2018/" style="font-size: 1.05rem;">2018<sup>2</sup></a><a href="/tags/Array/" style="font-size: 1.05rem;">Array<sup>1</sup></a><a href="/tags/ECMAScript6/" style="font-size: 1.05rem;">ECMAScript6<sup>14</sup></a><a href="/tags/Git/" style="font-size: 1.05rem;">Git<sup>4</sup></a><a href="/tags/Hyperapp/" style="font-size: 1.05rem;">Hyperapp<sup>2</sup></a><a href="/tags/JavaScript/" style="font-size: 1.05rem;">JavaScript<sup>2</sup></a><a href="/tags/Map/" style="font-size: 1.05rem;">Map<sup>1</sup></a><a href="/tags/Python/" style="font-size: 1.05rem;">Python<sup>7</sup></a><a href="/tags/Set/" style="font-size: 1.05rem;">Set<sup>1</sup></a><a href="/tags/css/" style="font-size: 1.05rem;">css<sup>21</sup></a><a href="/tags/es6/" style="font-size: 1.05rem;">es6<sup>1</sup></a><a href="/tags/hexo/" style="font-size: 1.05rem;">hexo<sup>2</sup></a><a href="/tags/history/" style="font-size: 1.05rem;">history<sup>1</sup></a><a href="/tags/html/" style="font-size: 1.05rem;">html<sup>4</sup></a><a href="/tags/http/" style="font-size: 1.05rem;">http<sup>1</sup></a><a href="/tags/javascript/" style="font-size: 1.05rem;">javascript<sup>17</sup></a><a href="/tags/jquery/" style="font-size: 1.05rem;">jquery<sup>1</sup></a><a href="/tags/js/" style="font-size: 1.05rem;">js<sup>2</sup></a><a href="/tags/node%E5%AD%A6%E4%B9%A0/" style="font-size: 1.05rem;">node学习<sup>4</sup></a><a href="/tags/python/" style="font-size: 1.05rem;">python<sup>2</sup></a><a href="/tags/sass/" style="font-size: 1.05rem;">sass<sup>1</sup></a><a href="/tags/vue/" style="font-size: 1.05rem;">vue<sup>7</sup></a><a href="/tags/vuepress/" style="font-size: 1.05rem;">vuepress<sup>1</sup></a><a href="/tags/wxpy/" style="font-size: 1.05rem;">wxpy<sup>2</sup></a><a href="/tags/%E4%B8%83%E5%A4%95/" style="font-size: 1.05rem;">七夕<sup>1</sup></a><a href="/tags/%E5%88%86%E4%BA%AB/" style="font-size: 1.05rem;">分享<sup>3</sup></a><a href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/" style="font-size: 1.05rem;">小程序<sup>1</sup></a><a href="/tags/%E5%B1%85%E4%B8%AD%E6%98%BE%E7%A4%BA/" style="font-size: 1.05rem;">居中显示<sup>1</sup></a><a href="/tags/%E5%BE%AE%E4%BF%A1/" style="font-size: 1.05rem;">微信<sup>4</sup></a><a href="/tags/%E5%BE%AE%E4%BF%A1%E6%9C%BA%E5%99%A8%E4%BA%BA/" style="font-size: 1.05rem;">微信机器人<sup>3</sup></a><a href="/tags/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/" style="font-size: 1.05rem;">技术分享<sup>2</sup></a><a href="/tags/%E6%95%B0%E7%BB%84/" style="font-size: 1.05rem;">数组<sup>2</sup></a><a href="/tags/%E6%95%B0%E7%BB%84%E6%93%8D%E4%BD%9C/" style="font-size: 1.05rem;">数组操作<sup>2</sup></a><a href="/tags/%E6%97%A5%E5%B8%B8%E6%8C%96%E5%9D%91/" style="font-size: 1.05rem;">日常挖坑<sup>2</sup></a><a href="/tags/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/" style="font-size: 1.05rem;">科学上网<sup>2</sup></a><a href="/tags/%E7%A7%BB%E5%8A%A8%E7%AB%AF/" style="font-size: 1.05rem;">移动端<sup>5</sup></a><a href="/tags/%E7%AC%94%E8%AE%B0/" style="font-size: 1.05rem;">笔记<sup>4</sup></a><a href="/tags/%E9%98%B2%E6%92%A4%E5%9B%9E/" style="font-size: 1.05rem;">防撤回<sup>1</sup></a><a href="/tags/%E9%9D%A2%E8%AF%95/" style="font-size: 1.05rem;">面试<sup>8</sup></a><a href="/tags/%E9%A2%84%E8%A7%88%E5%9B%BE/" style="font-size: 1.05rem;">预览图<sup>1</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/05/"><span class="card-archive-list-date">May 2020</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/03/"><span class="card-archive-list-date">March 2020</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/02/"><span class="card-archive-list-date">February 2020</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/01/"><span class="card-archive-list-date">January 2020</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2019/12/"><span class="card-archive-list-date">December 2019</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">4</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2019/11/"><span class="card-archive-list-date">November 2019</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">6</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2019/10/"><span class="card-archive-list-date">October 2019</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2019/09/"><span class="card-archive-list-date">September 2019</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">7</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/ES6%E5%85%A5%E9%97%A8%E7%B3%BB%E5%88%97/" itemprop="url">ES6入门系列</a></span><span class="article-meta tags"></span></div></div><h1 class="post-title" itemprop="name headline">ES6入门之Set 和 Map</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2019-08-05T02:00:00.000Z" title="发表于 2019-08-05 10:00:00">2019-08-05</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2024-01-04T06:20:10.712Z" title="更新于 2024-01-04 14:20:10">2024-01-04</time></span></div><div class="meta-secondline"><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为姑苏城"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>姑苏城</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src=""></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="https://toc.lieme.cn/2019/08/05/ES6%E5%85%A5%E9%97%A8%E4%B9%8BSet-%E5%92%8C-Map.html"><header><a class="post-meta-categories" href="/categories/ES6%E5%85%A5%E9%97%A8%E7%B3%BB%E5%88%97/" itemprop="url">ES6入门系列</a><h1 id="CrawlerTitle" itemprop="name headline">ES6入门之Set 和 Map</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">Lieme</span><time itemprop="dateCreated datePublished" datetime="2019-08-05T02:00:00.000Z" title="发表于 2019-08-05 10:00:00">2019-08-05</time><time itemprop="dateCreated datePublished" datetime="2024-01-04T06:20:10.712Z" title="更新于 2024-01-04 14:20:10">2024-01-04</time></header><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://blogimg.lieme.cn/FunIhT7TSezDvn2sAd8zT7r1tFP3"></p>
<h2 id="1-Set"><a href="#1-Set" class="headerlink" title="1. Set"></a>1. Set</h2><h3 id="1-1-基本用法"><a href="#1-1-基本用法" class="headerlink" title="1.1 基本用法"></a>1.1 基本用法</h3><blockquote>
<p>Set 类似于数组，但是成员的 值都是唯一的，没用重复的值。Set本身是一个构造函数，用来生成Set数据结构。</p>
</blockquote>
<pre><code>const s = new Set();

[2,3,4,5,6,4,2,2,7].forEach(x =&gt; s.add(x))

for (let i of s) &#123;
    console.log(i)
&#125; // 2 3 4 5 6 7

// Set 不会添加重复的值。
</code></pre>
<p>Set 函数可以接受一个数组（或具有 iterable 接口的其他数据结构）作为参数，用来初始化，如下：</p>
<pre><code>// 实例一
const set = new Set([1,2,3,4,5,5])
[...set] // [1,2,3,4,5]

// 实例二
const items = new Set([1,2,3,3,4])
items.size // 4

// 上面代码还展示了数组去重的方法

[...new Set(array)]

// 或者字符串去重

[...new Set(&#39;aabbcc&#39;)].join(&#39;&#39;)
</code></pre>
<p>向 Set 加入值的时候，不会发生类型转换， 所有**5 和 ‘5’**两个不同的值。在Set 内部判断两个值是否不同，使用的算法叫做 ‘Same-value-zero equality’,它和 ‘&#x3D;&#x3D;&#x3D;’类似，区别在于 向 Set 加入值的时候认为 NaN等于自身，而 ‘&#x3D;&#x3D;&#x3D;’ 则认为 NaN 不等于自身</p>
<pre><code>let set = new Set();
let a = NaN;
let b = NaN;
set.add(a);
set.add(b);
set // Set &#123;NaN&#125;
// 如上，只能向Set中添加一个NaN则说明了刚刚的证明
</code></pre>
<blockquote>
<p>在 Set中两个对象总是不相等的。</p>
</blockquote>
<pre><code>let set = new Set();
set.add(&#123;&#125;)
set.size // 1

set.add(&#123;&#125;)
set.size // 2
</code></pre>
<h3 id="1-2-Set-实例的属性和方法"><a href="#1-2-Set-实例的属性和方法" class="headerlink" title="1.2 Set 实例的属性和方法"></a>1.2 Set 实例的属性和方法</h3><p>Set 结构的实例有以下属性</p>
<ul>
<li>Set.prototype.constructor &#x2F;&#x2F; 构造函数，默认是Set函数</li>
<li>Set.prototype.size &#x2F;&#x2F; 返回 Set实例的成员总数。</li>
</ul>
<blockquote>
<p>Set 实例的方法分为两大类：操作方法和遍历方法</p>
</blockquote>
<p>Set.prototype.add(value)    &#x2F;&#x2F; 添加某个值，返回 Set 结构本身<br>Set.prototype.delete(value)     &#x2F;&#x2F; 删除某个值，返回一个布尔值，表示是否删除成功<br>Set.prototype.has(value)    &#x2F;&#x2F; 返回一个布尔值，表示该值是否为Set的成员<br>Set.prototype.clear()   &#x2F;&#x2F; 清除所有成员，没用返回值</p>
<pre><code>s.add(1).add(2).add(2);
// 注意2被加入了两次

s.size // 2

s.has(1) // true
s.has(2) // true
s.has(3) // false

s.delete(2);
s.has(2) // false

// Object 和 Set 如何判断一个键的区别

// 对象
const p = &#123;
    &#39;w&#39;: 1,
    &#39;h&#39;: 2
&#125;
if(p[a])&#123;
    no
&#125;

// Set
const p = new Set()
p.add(&#39;w&#39;)
p.add(&#39;h&#39;)
if(p.has(c))&#123;
    no
&#125;
</code></pre>
<blockquote>
<p>Array.from 方法可以将 Set 结构转为数组，如下：</p>
</blockquote>
<pre><code>const items = new Set([1,2,3,4,5])
const array = Array.from(items)

// 数组去重的另外一种方法

function d(a)&#123;
    return Array.from(new Set(a))
&#125;
d([1,2,3,3,5])
</code></pre>
<h3 id="1-3-遍历操作"><a href="#1-3-遍历操作" class="headerlink" title="1.3 遍历操作"></a>1.3 遍历操作</h3><blockquote>
<p>Set 结构的实例有四个遍历方法，用于遍历成员</p>
</blockquote>
<ul>
<li>Set.prototype.keys()    &#x2F;&#x2F; 返回键名的遍历器</li>
<li>Set.prototype.values()   &#x2F;&#x2F; 返回键值的遍历器</li>
<li>Set.prototype.entries()     &#x2F;&#x2F; 返回键值对的遍历器</li>
<li>Set.prototype.forEach()     &#x2F;&#x2F; 使用回调函数遍历每个成员</li>
</ul>
<p><strong>注意</strong>：Set遍历顺序就是插入顺序，这个特性在特定情况非常有用，比如使用Set保存一个回调函数列表，调用时就能保证按照添加顺序调用。</p>
<h4 id="1-3-1-keys-、values、entries"><a href="#1-3-1-keys-、values、entries" class="headerlink" title="1.3.1 keys()、values、entries()"></a>1.3.1 keys()、values、entries()</h4><blockquote>
<p>上面三个都是返回遍历器对象，由于Set结构没用键名，只有键值（或者说键名和键值是同一个值），所以以上方法的行为完全一致</p>
</blockquote>
<pre><code>let set = new Set([&#39;red&#39;, &#39;green&#39;, &#39;blue&#39;]);

for (let item of set.keys()) &#123;
  console.log(item);
&#125;
// red
// green
// blue

for (let item of set.values()) &#123;
  console.log(item);
&#125;
// red
// green
// blue

for (let item of set.entries()) &#123;
  console.log(item);
&#125;
// [&quot;red&quot;, &quot;red&quot;]
// [&quot;green&quot;, &quot;green&quot;]
// [&quot;blue&quot;, &quot;blue&quot;]
</code></pre>
<p><strong>注意</strong>：Set结构的实例默认可遍历，它的默认遍历器生成函数就是它的 values方法，这样我们就可以省略 values，直接用 for…of循环遍历Set</p>
<h4 id="1-3-2-forEach"><a href="#1-3-2-forEach" class="headerlink" title="1.3.2 forEach()"></a>1.3.2 forEach()</h4><blockquote>
<p>Set结构的实例和数组一样，也有 forEach方法，用于对每个成员执行某种操作，没用返回值。forEach 可以用第二个参数表示绑定处理函数内部的 this 对象。</p>
</blockquote>
<h4 id="1-3-3-遍历的应用"><a href="#1-3-3-遍历的应用" class="headerlink" title="1.3.3 遍历的应用"></a>1.3.3 遍历的应用</h4><blockquote>
<p>扩展运算符(…)内部使用 for…of循环样能用于 Set 结构</p>
</blockquote>
<pre><code>let arr = [3, 5, 2, 2, 5, 5];
let unique = [...new Set(arr)];
// [3, 5, 2]用来去重操作

// 实现 并集、交集、差集
let a = new Set([1, 2, 3]);
let b = new Set([4, 3, 2]);

// 并集
let union = new Set([...a, ...b]);
// Set &#123;1, 2, 3, 4&#125;

// 交集
let intersect = new Set([...a].filter(x =&gt; b.has(x)));
// set &#123;2, 3&#125;

// 差集
let difference = new Set([...a].filter(x =&gt; !b.has(x)));
// Set &#123;1&#125;
</code></pre>
<blockquote>
<p>如果想在遍历操作中同步改变原理的Set结构，只能利用原有的Set结构映射一个新的结构，然后赋值给原来的Set,另一个就是通过 Array.from方法。</p>
</blockquote>
<pre><code>// 方法一
let set = new Set([1, 2, 3]);
set = new Set([...set].map(val =&gt; val * 2));
// set的值是2, 4, 6

// 方法二
let set = new Set([1, 2, 3]);
set = new Set(Array.from(set, val =&gt; val * 2));
// set的值是2, 4, 6
</code></pre>
<h2 id="2-WeakSet"><a href="#2-WeakSet" class="headerlink" title="2. WeakSet"></a>2. WeakSet</h2><blockquote>
<p>WeakSet 结构与Set类似，也不是重复的值的集合，但是和Set有两个区别，第一个它的成员只能为对象，另一个它的对象都是弱印象，即垃圾回收机制不考虑 WeakSet对该对象的引用，通俗的讲就是，如果该对象没用在其他对象中被引用，那么该对象就会被回收，不会考虑这个对象是否在 WeakSet中。</p>
</blockquote>
<p>依赖于垃圾回收进制依赖引用计数，如果一个值的引用次数不为0，那么就不会被回收，但是有的时候，结束使用该值后，会忘记取消引用，就会导致内存无法释放从而导致内存泄漏。但是 WeakSet里面的而引用不会计入垃圾回收机制，所以适合存放临时的对象，一旦外部消失，那么WeakSet里面的引用就会自动消失。</p>
<p><strong>基于以上的特点，WeakSet 成员不适合被引用，所以 WeakSet无法被遍历。</strong></p>
<h3 id="2-1-语法"><a href="#2-1-语法" class="headerlink" title="2.1 语法"></a>2.1 语法</h3><blockquote>
<p>它也是一个构造函数，可以通过  new 来创建</p>
</blockquote>
<pre><code>const ws = new WeakSet()

// 做为构造函数，WeakSet

可以接受一个数组或类似数组的对象作为参数，该数组的所有成员，
都会自动成为 WeakSet实例对象的成员。
</code></pre>
<p><strong>注意</strong>：只能是数组的成员成为WeakSet的成员，而不是 a 数组本身，这就意味着，数组的成员只能是对象。</p>
<h3 id="2-2-WeakSet的方法"><a href="#2-2-WeakSet的方法" class="headerlink" title="2.2 WeakSet的方法"></a>2.2 WeakSet的方法</h3><ol>
<li>WeakSet.prototype.add(value): 向 WeakSet实例添加一个新成员。</li>
<li>WeakSet.prototype.delete(value): 清除 WeakSet实例的指定成员。</li>
<li>WeakSet.prototype.has(value): 返回一个布尔值，表示某个值是否存在 WeakSet实例中。</li>
</ol>
<p><strong>注意</strong>： WeakSet 同样没有size 属性，不能遍历其成员。</p>
<h2 id="3-Map"><a href="#3-Map" class="headerlink" title="3. Map"></a>3. Map</h2><blockquote>
<p>JavaScript的对象，本质上是键值对的集合，但是传统上只能字符串当做键，这给他带来了很大的限制。Map的出现，就是让各种类型的值都可以当作键。Map提供的是  “值-值”的对应。</p>
</blockquote>
<pre><code>const map = new Map([
  [&#39;name&#39;, &#39;张三&#39;],
  [&#39;title&#39;, &#39;Author&#39;]
]);

map.size // 2
map.has(&#39;name&#39;) // true
map.get(&#39;name&#39;) // &quot;张三&quot;
map.has(&#39;title&#39;) // true
map.get(&#39;title&#39;) // &quot;Author&quot;
</code></pre>
<p><strong>注意</strong>：Set 和 Map 都可以用来生成新的Map，如果对同一个键多次赋值，那么前面的将被后面的值覆盖。另外只有对同一个对象的引用，Map结构才将其视为同一个键。另外同样的两个实例，在Map中将被视为两个键。</p>
<p><strong>总结：</strong>综上所述，Map的键实际上跟内存地址绑定的，只要内存地址不一样，就视为两个键。这样就可以解决同名属性碰撞的问题。如果我们扩展别人库的时候，如果使用对象最为键名，就不用担心自己的属性与原作者属性冲突。 </p>
<p>如果Map的键是一个简单类型的数值，则只要两个值严格相等，Map将其视为一个键，0 和 -0 是一个键，true 和 ‘true’则是两个不同的键， undefined 和 null 也是两个不同的键， 另外 NaN 在Map 中视为同一个键</p>
<h3 id="3-1-Map的属性和操作方法"><a href="#3-1-Map的属性和操作方法" class="headerlink" title="3.1 Map的属性和操作方法"></a>3.1 Map的属性和操作方法</h3><h5 id="1-size-属性"><a href="#1-size-属性" class="headerlink" title="1. size 属性"></a>1. size 属性</h5><blockquote>
<p>size 属性返回Map结构的成员总数</p>
</blockquote>
<pre><code>const map = new Map()
map.set(&#39;foo&#39;, ture)
map.set(&#39;bar&#39;, false)

map.size // 2
</code></pre>
<h5 id="2-Map-prototype-set-key-value"><a href="#2-Map-prototype-set-key-value" class="headerlink" title="2. Map.prototype.set(key, value)"></a>2. Map.prototype.set(key, value)</h5><blockquote>
<p>set 方法设置键名 key 对应的键值为 value，然后返回整个 Map 结构。如果 key 已经有值，则键值会被更新，否则就新生成该键。</p>
</blockquote>
<pre><code>const m = new Map()
m.set(&#39;e&#39;, 6)   // 键值是字符串
m.set(2, &#39;s&#39;)   // 键是数值
m.set(undefined, &#39;n&#39;)   // 键是 undefined

// set方法返回的是当前的Map对象，因此可以采用链式写法

let map = new Map()
.set(1, &#39;a&#39;)
.set(2, &#39;b&#39;)
.set(3, &#39;c&#39;)
</code></pre>
<h5 id="3-Map-prototype-get-key"><a href="#3-Map-prototype-get-key" class="headerlink" title="3. Map.prototype.get(key)"></a>3. Map.prototype.get(key)</h5><blockquote>
<p>get 方法读取 key 对应的键值，如果找不到key就返回 undefined</p>
</blockquote>
<pre><code>const m = new Map();

m.set(&#39;c&#39;,  124)
m.get(&#39;c&#39;)  // 124
</code></pre>
<h5 id="4-Map-prototype-has-key"><a href="#4-Map-prototype-has-key" class="headerlink" title="4. Map.prototype.has(key)"></a>4. Map.prototype.has(key)</h5><blockquote>
<p>返回一个布尔值，用来表示某个键是否在当前 Map 对象中</p>
</blockquote>
<pre><code>let map = new Map()
.set(1, &#39;a&#39;)
.set(2, &#39;b&#39;)
.set(3, &#39;c&#39;)

map.has(1)  // true
map.has(4)  // false
</code></pre>
<h5 id="5-Map-prototype-delete-key"><a href="#5-Map-prototype-delete-key" class="headerlink" title="5. Map.prototype.delete(key)"></a>5. Map.prototype.delete(key)</h5><blockquote>
<p>delete方法删除某个键，返回 true,如果删除失败，则返回 false </p>
</blockquote>
<pre><code>let map = new Map()
    .set(1, &#39;a&#39;)
    .set(2, &#39;b&#39;)
    .set(3, &#39;c&#39;)

map.delete(1)   // true
map.delete(4)   // false
</code></pre>
<h5 id="6-Map-prototype-clear"><a href="#6-Map-prototype-clear" class="headerlink" title="6. Map.prototype.clear()"></a>6. Map.prototype.clear()</h5><blockquote>
<p> clear 方法清除所有成员，没有返回值</p>
</blockquote>
<pre><code>let map = new Map()
    .set(1, &#39;a&#39;)
    .set(2, &#39;b&#39;)
    .set(3, &#39;c&#39;)

map.size    // 3
map.clear() 
map.size    // 0
</code></pre>
<h3 id="3-2-遍历方法"><a href="#3-2-遍历方法" class="headerlink" title="3.2 遍历方法"></a>3.2 遍历方法</h3><ol>
<li>Map.prototype.keys()： 返回键名的遍历器</li>
<li>Map.prototype.values(): 返回键值的遍历器</li>
<li>Map.prototype.entries(): 返回所有成员的遍历器</li>
<li>Map.prototype.forEach(): 遍历Map的所有成员</li>
</ol>
<p><strong>注意：Map的遍历顺序就是插入顺序。</strong></p>
<p>Map 结构转为数组结构，比较快速的方法是使用扩展运算符（…），另外Map可以通过 forEach 可以实现遍历。</p>
<pre><code>const map = new Map([
  [1, &#39;one&#39;],
  [2, &#39;two&#39;],
  [3, &#39;three&#39;],
]);

[...map.keys()]
// [1, 2, 3]

[...map.values()]
// [&#39;one&#39;, &#39;two&#39;, &#39;three&#39;]

[...map.entries()]
// [[1,&#39;one&#39;], [2, &#39;two&#39;], [3, &#39;three&#39;]]

[...map]
// [[1,&#39;one&#39;], [2, &#39;two&#39;], [3, &#39;three&#39;]]
</code></pre>
<h3 id="3-3-与其他数据结构的互相转换"><a href="#3-3-与其他数据结构的互相转换" class="headerlink" title="3.3 与其他数据结构的互相转换"></a>3.3 与其他数据结构的互相转换</h3><h5 id="1-Map转为数组"><a href="#1-Map转为数组" class="headerlink" title="1. Map转为数组"></a>1. Map转为数组</h5><blockquote>
<p>通过扩展运算符(…)</p>
</blockquote>
<h5 id="2-数组转为Map"><a href="#2-数组转为Map" class="headerlink" title="2. 数组转为Map"></a>2. 数组转为Map</h5><blockquote>
<p>将数组 传入 Map构造函数，就可以转为Map</p>
</blockquote>
<pre><code>new Map([
  [true, 7],
  [&#123;foo: 3&#125;, [&#39;abc&#39;]]
])
</code></pre>
<h5 id="3-Map-转为对象"><a href="#3-Map-转为对象" class="headerlink" title="3. Map 转为对象"></a>3. Map 转为对象</h5><blockquote>
<p>如果Map的键都是字符串，它可以无损地转为对象，如果有非字符串的键名，那么这个键名会被转成字符串，再作为对象的键名。</p>
</blockquote>
<h5 id="4-对象转为-Map"><a href="#4-对象转为-Map" class="headerlink" title="4. 对象转为 Map"></a>4. 对象转为 Map</h5><h5 id="5-Map-转为-JSON"><a href="#5-Map-转为-JSON" class="headerlink" title="5. Map 转为 JSON"></a>5. Map 转为 JSON</h5><blockquote>
<p>Map转为JSON要区分两种情况。一种情况是，Map 的键名都是字符串，这时可以选择转为对象JSON。另外一种情况是，Map 的键名有非字符串，这时可以选择转为数组JSON</p>
</blockquote>
<h5 id="6-JSON-转为-Map"><a href="#6-JSON-转为-Map" class="headerlink" title="6. JSON 转为 Map"></a>6. JSON 转为 Map</h5><blockquote>
<p>JSON转为Map,正常情况下，所有键名都是字符串。但是，有一种特殊情况，整个JSON就是一个数组，且每个数组成员本身，又是一个有两个成员的数组。这时，它可以一一对应地转为Map.</p>
</blockquote>
<h2 id="4-WeakMap"><a href="#4-WeakMap" class="headerlink" title="4. WeakMap"></a>4. WeakMap</h2><blockquote>
<p>WeakMap 结构与 Map 结构类似，也是用于生成键值对的集合</p>
</blockquote>
<p>WeakMap 和 Map 的区别</p>
<pre><code>1. WeakMap只接受对象作为键名(null除外)，不接受其他类型的值作为键名。
2. WeakMap的键名所指向的对象，不计入垃圾回收机制。
</code></pre>
<p>如果 我们想在某个对象上面存放以未数据，但是会形成对于这个对象的引用，如果我们不需要这两个对象，就必须手动删除，否则垃圾回收机制就不会释放占用的内存。</p>
<p>WeakMap 就是为了解决这个问题而诞生，它的键名所引用的对象都是弱引用，即垃圾回收机制不将该引用考虑在内。因此，只要所引用的对象的其他引用被清除，垃圾回收机制就会释放该对象所占用的内存，也就是说一旦不再需要，WeakMap里面的键名对象和所对应的键值对会自动消失，不用手动删除。</p>
<p>注意： WeakMap弱引用的只是键名，而不是键值。键值依然是正常引用。</p>
<h3 id="4-1-WeakMap-的语法"><a href="#4-1-WeakMap-的语法" class="headerlink" title="4.1 WeakMap 的语法"></a>4.1 WeakMap 的语法</h3><blockquote>
<p>WeakMap 与 Map 在 API的区别主要有两个，一是没有遍历操作（没有keys，values，entries）,也没有size属性。因为没有办法列出所有键名，某个键名是否存在完全不可预测，跟垃圾回收机制是否运行相关。这一刻可以取到键名，下一个垃圾回收机制突然运行了，这个键名就没有了。为了防止不确定性，就统一规定不能取到键名。二是无法情况，即不支持 clear 方法。因此 WeakMap 有四个方法： get()、set()、has()、delete()</p>
</blockquote>
<pre><code>const wm = new WeakMap();

// size、forEach、clear 方法都不存在
wm.size // undefined
wm.forEach // undefined
wm.clear // undefined
</code></pre>
<h3 id="4-2-WeakMap的用途"><a href="#4-2-WeakMap的用途" class="headerlink" title="4.2 WeakMap的用途"></a>4.2 WeakMap的用途</h3><ol>
<li>应用于 DOM 节点作为键名</li>
<li>WeakMap 的另一个用处是部署私有属性</li>
<li>就是防止内存泄漏的风险</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://user-gold-cdn.xitu.io/2019/6/18/16b69606d7c1155c?w=258&h=258&f=jpeg&s=26659"></p>
<p align="center" style="font-size:30px;color:#1c8a95"> 欢迎关注 公众号【小夭同学】 </p>


</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://blogimg.lieme.cn/2023/07/2023072703121951.jpeg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://blogimg.lieme.cn/2023/07/2023072703121951.jpeg" title="头像" alt="头像"></a><div class="post-copyright__author_name">Lieme</div><div class="post-copyright__author_desc"></div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://toc.lieme.cn/2019/08/05/ES6%E5%85%A5%E9%97%A8%E4%B9%8BSet-%E5%92%8C-Map.html">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://toc.lieme.cn/2019/08/05/ES6%E5%85%A5%E9%97%A8%E4%B9%8BSet-%E5%92%8C-Map.html')">ES6入门之Set 和 Map</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="https://blogimg.lieme.cn/2022/05/2022051011515173.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://blogimg.lieme.cn/2022/05/2022051011515173.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://blogimg.lieme.cn/2022/05/2022051011515173.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://blogimg.lieme.cn/2022/05/2022051011515173.png" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://toc.lieme.cn/2019/08/05/ES6%E5%85%A5%E9%97%A8%E4%B9%8BSet-%E5%92%8C-Map.html"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=ES6入门之Set 和 Map&amp;url=https://toc.lieme.cn/2019/08/05/ES6%E5%85%A5%E9%97%A8%E4%B9%8BSet-%E5%92%8C-Map.html&amp;pic=" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://toc.lieme.cn" target="_blank">卖坚果的怪叔叔</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"></div></div><div class="post_share"><div class="social-share" data-image="https://blogimg.lieme.cn/2023/07/2023072703121951.jpeg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2019/07/16/%E9%87%8D%E5%AD%A6JavaScript%E4%B9%8B%E5%8F%98%E9%87%8F%E3%80%81%E4%BD%9C%E7%94%A8%E5%9F%9F%E5%92%8C%E5%86%85%E5%AD%98%E9%97%AE%E9%A2%98.html"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">重学JavaScript之变量、作用域和内存问题</div></div></a></div><div class="next-post pull-right"><a href="/2019/08/07/%E5%B8%B8%E7%94%A8%E7%9A%84JS%E6%AD%A3%E5%88%99%E6%A0%A1%E9%AA%8C%E8%A1%A8%E8%BE%BE%E5%BC%8F.html"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">常用的JS正则校验表达式</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://blogimg.lieme.cn/2023/07/2023072703121951.jpeg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__description">用心记录美好的瞬间</div></div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://bu.dusays.com/2023/01/13/63c02edf44033.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(https://bu.dusays.com/2023/05/13/645fa415e8694.png) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-Set"><span class="toc-number">1.</span> <span class="toc-text">1. Set</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95"><span class="toc-number">1.1.</span> <span class="toc-text">1.1 基本用法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-Set-%E5%AE%9E%E4%BE%8B%E7%9A%84%E5%B1%9E%E6%80%A7%E5%92%8C%E6%96%B9%E6%B3%95"><span class="toc-number">1.2.</span> <span class="toc-text">1.2 Set 实例的属性和方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-%E9%81%8D%E5%8E%86%E6%93%8D%E4%BD%9C"><span class="toc-number">1.3.</span> <span class="toc-text">1.3 遍历操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-1-keys-%E3%80%81values%E3%80%81entries"><span class="toc-number">1.3.1.</span> <span class="toc-text">1.3.1 keys()、values、entries()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-2-forEach"><span class="toc-number">1.3.2.</span> <span class="toc-text">1.3.2 forEach()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-3-%E9%81%8D%E5%8E%86%E7%9A%84%E5%BA%94%E7%94%A8"><span class="toc-number">1.3.3.</span> <span class="toc-text">1.3.3 遍历的应用</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-WeakSet"><span class="toc-number">2.</span> <span class="toc-text">2. WeakSet</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E8%AF%AD%E6%B3%95"><span class="toc-number">2.1.</span> <span class="toc-text">2.1 语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-WeakSet%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-number">2.2.</span> <span class="toc-text">2.2 WeakSet的方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-Map"><span class="toc-number">3.</span> <span class="toc-text">3. Map</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-Map%E7%9A%84%E5%B1%9E%E6%80%A7%E5%92%8C%E6%93%8D%E4%BD%9C%E6%96%B9%E6%B3%95"><span class="toc-number">3.1.</span> <span class="toc-text">3.1 Map的属性和操作方法</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-size-%E5%B1%9E%E6%80%A7"><span class="toc-number">3.1.0.1.</span> <span class="toc-text">1. size 属性</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-Map-prototype-set-key-value"><span class="toc-number">3.1.0.2.</span> <span class="toc-text">2. Map.prototype.set(key, value)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-Map-prototype-get-key"><span class="toc-number">3.1.0.3.</span> <span class="toc-text">3. Map.prototype.get(key)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-Map-prototype-has-key"><span class="toc-number">3.1.0.4.</span> <span class="toc-text">4. Map.prototype.has(key)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-Map-prototype-delete-key"><span class="toc-number">3.1.0.5.</span> <span class="toc-text">5. Map.prototype.delete(key)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-Map-prototype-clear"><span class="toc-number">3.1.0.6.</span> <span class="toc-text">6. Map.prototype.clear()</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E9%81%8D%E5%8E%86%E6%96%B9%E6%B3%95"><span class="toc-number">3.2.</span> <span class="toc-text">3.2 遍历方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-%E4%B8%8E%E5%85%B6%E4%BB%96%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%9A%84%E4%BA%92%E7%9B%B8%E8%BD%AC%E6%8D%A2"><span class="toc-number">3.3.</span> <span class="toc-text">3.3 与其他数据结构的互相转换</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-Map%E8%BD%AC%E4%B8%BA%E6%95%B0%E7%BB%84"><span class="toc-number">3.3.0.1.</span> <span class="toc-text">1. Map转为数组</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E6%95%B0%E7%BB%84%E8%BD%AC%E4%B8%BAMap"><span class="toc-number">3.3.0.2.</span> <span class="toc-text">2. 数组转为Map</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-Map-%E8%BD%AC%E4%B8%BA%E5%AF%B9%E8%B1%A1"><span class="toc-number">3.3.0.3.</span> <span class="toc-text">3. Map 转为对象</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-%E5%AF%B9%E8%B1%A1%E8%BD%AC%E4%B8%BA-Map"><span class="toc-number">3.3.0.4.</span> <span class="toc-text">4. 对象转为 Map</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-Map-%E8%BD%AC%E4%B8%BA-JSON"><span class="toc-number">3.3.0.5.</span> <span class="toc-text">5. Map 转为 JSON</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-JSON-%E8%BD%AC%E4%B8%BA-Map"><span class="toc-number">3.3.0.6.</span> <span class="toc-text">6. JSON 转为 Map</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-WeakMap"><span class="toc-number">4.</span> <span class="toc-text">4. WeakMap</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-WeakMap-%E7%9A%84%E8%AF%AD%E6%B3%95"><span class="toc-number">4.1.</span> <span class="toc-text">4.1 WeakMap 的语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-WeakMap%E7%9A%84%E7%94%A8%E9%80%94"><span class="toc-number">4.2.</span> <span class="toc-text">4.2 WeakMap的用途</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2020/05/20/%E5%8D%9A%E5%AE%A2%E8%BF%81%E7%A7%BB%E6%8B%89.html" title="博客迁移拉~"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://blogimg.lieme.cn/2023/10/2023102407021989-e1698138051855.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="博客迁移拉~"/></a><div class="content"><a class="title" href="/2020/05/20/%E5%8D%9A%E5%AE%A2%E8%BF%81%E7%A7%BB%E6%8B%89.html" title="博客迁移拉~">博客迁移拉~</a><time datetime="2020-05-20T02:38:33.000Z" title="发表于 2020-05-20 10:38:33">2020-05-20</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2020/03/06/%E7%94%A8Python%E7%88%AC%E5%8F%96%E5%BE%AE%E4%BF%A1%E5%A5%BD%E5%8F%8B%E6%98%B5%E7%A7%B0%E5%92%8C%E5%A4%B4%E5%83%8F.html" title="用Python爬取微信好友昵称和头像">用Python爬取微信好友昵称和头像</a><time datetime="2020-03-06T06:41:00.000Z" title="发表于 2020-03-06 14:41:00">2020-03-06</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2020/03/04/%E4%BB%80%E4%B9%88%E6%98%AF%E5%87%BD%E6%95%B0%EF%BC%9F.html" title="什么是函数？">什么是函数？</a><time datetime="2020-03-04T13:12:53.000Z" title="发表于 2020-03-04 21:12:53">2020-03-04</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2020/02/21/CSS%E5%AE%9E%E7%8E%B0%E5%B1%85%E4%B8%AD%E6%98%BE%E7%A4%BA.html" title="CSS实现居中显示">CSS实现居中显示</a><time datetime="2020-02-21T13:13:33.000Z" title="发表于 2020-02-21 21:13:33">2020-02-21</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2020/02/13/%E6%AD%A6%E6%B1%89%E6%96%B0%E5%86%A0%E8%82%BA%E7%82%8E%E6%97%B6%E9%97%B4%E7%BA%BFTIMELINE.html" title="武汉新冠肺炎时间线TIMELINE">武汉新冠肺炎时间线TIMELINE</a><time datetime="2020-02-13T13:34:00.000Z" title="发表于 2020-02-13 21:34:00">2020-02-13</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2016 - 2024 By <a class="footer-bar-link" href="/" title="Lieme" target="_blank">Lieme</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://cuixinxin.cn" title="坚果大叔">坚果大叔</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">153</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">104</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">14</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://cuixinxin.cn/" title="卖坚果的怪叔叔"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="卖坚果的怪叔叔"/><span class="back-menu-item-text">卖坚果的怪叔叔</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/travel/"><span> 旅行</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/photos/"><span> 定格时光</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/life/"><span> 生活</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/about/"><span> 关于</span></a></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/2018/" style="font-size: 0.88rem;">2018<sup>2</sup></a><a href="/tags/Array/" style="font-size: 0.88rem;">Array<sup>1</sup></a><a href="/tags/ECMAScript6/" style="font-size: 0.88rem;">ECMAScript6<sup>14</sup></a><a href="/tags/Git/" style="font-size: 0.88rem;">Git<sup>4</sup></a><a href="/tags/Hyperapp/" style="font-size: 0.88rem;">Hyperapp<sup>2</sup></a><a href="/tags/JavaScript/" style="font-size: 0.88rem;">JavaScript<sup>2</sup></a><a href="/tags/Map/" style="font-size: 0.88rem;">Map<sup>1</sup></a><a href="/tags/Python/" style="font-size: 0.88rem;">Python<sup>7</sup></a><a href="/tags/Set/" style="font-size: 0.88rem;">Set<sup>1</sup></a><a href="/tags/css/" style="font-size: 0.88rem;">css<sup>21</sup></a><a href="/tags/es6/" style="font-size: 0.88rem;">es6<sup>1</sup></a><a href="/tags/hexo/" style="font-size: 0.88rem;">hexo<sup>2</sup></a><a href="/tags/history/" style="font-size: 0.88rem;">history<sup>1</sup></a><a href="/tags/html/" style="font-size: 0.88rem;">html<sup>4</sup></a><a href="/tags/http/" style="font-size: 0.88rem;">http<sup>1</sup></a><a href="/tags/javascript/" style="font-size: 0.88rem;">javascript<sup>17</sup></a><a href="/tags/jquery/" style="font-size: 0.88rem;">jquery<sup>1</sup></a><a href="/tags/js/" style="font-size: 0.88rem;">js<sup>2</sup></a><a href="/tags/node%E5%AD%A6%E4%B9%A0/" style="font-size: 0.88rem;">node学习<sup>4</sup></a><a href="/tags/python/" style="font-size: 0.88rem;">python<sup>2</sup></a><a href="/tags/sass/" style="font-size: 0.88rem;">sass<sup>1</sup></a><a href="/tags/vue/" style="font-size: 0.88rem;">vue<sup>7</sup></a><a href="/tags/vuepress/" style="font-size: 0.88rem;">vuepress<sup>1</sup></a><a href="/tags/wxpy/" style="font-size: 0.88rem;">wxpy<sup>2</sup></a><a href="/tags/%E4%B8%83%E5%A4%95/" style="font-size: 0.88rem;">七夕<sup>1</sup></a><a href="/tags/%E5%88%86%E4%BA%AB/" style="font-size: 0.88rem;">分享<sup>3</sup></a><a href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/" style="font-size: 0.88rem;">小程序<sup>1</sup></a><a href="/tags/%E5%B1%85%E4%B8%AD%E6%98%BE%E7%A4%BA/" style="font-size: 0.88rem;">居中显示<sup>1</sup></a><a href="/tags/%E5%BE%AE%E4%BF%A1/" style="font-size: 0.88rem;">微信<sup>4</sup></a><a href="/tags/%E5%BE%AE%E4%BF%A1%E6%9C%BA%E5%99%A8%E4%BA%BA/" style="font-size: 0.88rem;">微信机器人<sup>3</sup></a><a href="/tags/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/" style="font-size: 0.88rem;">技术分享<sup>2</sup></a><a href="/tags/%E6%95%B0%E7%BB%84/" style="font-size: 0.88rem;">数组<sup>2</sup></a><a href="/tags/%E6%95%B0%E7%BB%84%E6%93%8D%E4%BD%9C/" style="font-size: 0.88rem;">数组操作<sup>2</sup></a><a href="/tags/%E6%97%A5%E5%B8%B8%E6%8C%96%E5%9D%91/" style="font-size: 0.88rem;">日常挖坑<sup>2</sup></a><a href="/tags/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/" style="font-size: 0.88rem;">科学上网<sup>2</sup></a><a href="/tags/%E7%A7%BB%E5%8A%A8%E7%AB%AF/" style="font-size: 0.88rem;">移动端<sup>5</sup></a><a href="/tags/%E7%AC%94%E8%AE%B0/" style="font-size: 0.88rem;">笔记<sup>4</sup></a><a href="/tags/%E9%98%B2%E6%92%A4%E5%9B%9E/" style="font-size: 0.88rem;">防撤回<sup>1</sup></a><a href="/tags/%E9%9D%A2%E8%AF%95/" style="font-size: 0.88rem;">面试<sup>8</sup></a><a href="/tags/%E9%A2%84%E8%A7%88%E5%9B%BE/" style="font-size: 0.88rem;">预览图<sup>1</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("04/01/2017 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2016 By 安知鱼 V1.6.12",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 Lieme 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><div class="js-pjax"><input type="hidden" name="page-type" id="page-type" value="post"></div><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>